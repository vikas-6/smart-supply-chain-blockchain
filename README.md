# Smart SupplyChain Blockchain

A robust blockchain-based Supply Chain Management system featuring **AI-driven anti-counterfeit intelligence**, **TrustScore reputation system**, and **automated recall management**. This project leverages Ethereum smart contracts and Machine Learning to ensure product authenticity and transparency.

## Core Features

### 1. AI-Powered Anti-Counterfeit Intelligence
- **Risk Analysis Model**: Analyzes supply chain data to detect anomalies.
- **Time Gap Analysis**: Flags suspicious transaction timings between supply chain stages.
- **Location Validation**: Verifies geographical consistency of transactions.
- **Duplicate Detection**: Identifies potential cloned product entries.
- **Automated Flagging**: Products exceeding risk thresholds are automatically flagged for review.

### 2. Public Verification Portal
- **QR Code Authentication**: Allows end-users to verify product history and authenticity.
- **Supply Chain Visibility**: Displays the complete journey of the product from manufacturer to retailer.
- **Safety Alerts**: Prominently displays recall status and risk warnings.

### 3. TrustScore Reputation System
- **Soulbound Tokens**: Non-transferable reputation identifiers for supply chain participants.
- **Dynamic Scoring**: Reputation scores update automatically based on successful deliveries and compliance.
- **Tiered System**: Participants are categorized (Platinum, Gold, Silver, Bronze) based on performance.

### 4. Smart Recall System
- **Global Recall**: Triggering a recall instantly updates the status across the entire blockchain.
- **Transaction Locking**: Prevents further movement or sale of recalled batches.
- **Transparency**: Recall reasons are authentically recorded on-chain.

## Tech Stack

- **Smart Contracts**: Solidity ^0.5.16
- **Blockchain**: Ethereum (Ganache for local development)
- **Frontend**: React.js with modern UI/UX
- **Backend Services**: Node.js + Express (Anomaly Detection, Recall Management)
- **Web3**: Web3.js for blockchain integration
- **Build Tool**: Truffle
- **AI/ML**: Custom risk analysis algorithms

## Prerequisites

- Node.js v14+
- Ganache (GUI or CLI)
- MetaMask browser extension
- Truffle
- Git

## ðŸš€ Installation & Setup

### 1. Clone & Install Dependencies

```bash
git clone <your-repo>
cd Smart-SupplyChain-Blockchain

# Install root dependencies
npm install

# Install client dependencies
cd client
npm install
cd ..

# Install anomaly service dependencies
cd anomaly-service
npm install
cd ..
```

### 2. Start Ganache

Open Ganache GUI and create a workspace with:
- Port: 8545
- Network ID: 1337 (or use "*" in truffle config)

### 3. Compile & Deploy Smart Contracts

```bash
npx truffle compile
npx truffle migrate --reset
```

> **Note**: The migration will deploy both `SmartSupplyChain.sol` and `SmartTrustScore.sol` contracts.

### 4. Start Anomaly Detection Service

```bash
cd anomaly-service
cp .env.example .env
# Edit .env if needed (default values work for testing)
npm start
```

The service will run on `http://localhost:5000`

###5. Start Frontend

```bash
cd client
npm start
```

The app will open at `http://localhost:3000`

### 6. Configure MetaMask

- Add Ganache network:
  - RPC: `http://127.0.0.1:8545`
  - Chain ID: `1337`
- Import accounts from Ganache using private keys

## User Guide

### Administrator Functions

#### 1. Register Participants
- Navigate to **Register Roles**
- Add Raw Material Suppliers, Manufacturers, Distributors, and Retailers
- Each participant is automatically initialized with a TrustScore.

#### 2. Create Product Orders
- Go to **Order Materials**
- Add new products with name and description
- Products are assigned a unique Blockchain ID and QR code.

#### 3. Monitor Intelligence Dashboard
- Visit the **Anti-Counterfeit Dashboard**
- View flagged products and risk scores generated by the AI service
- Analyze detailed anomalies detected in the supply chain data.

#### 4. Manage Recalls
- Trigger recalls directly from the dashboard
- The system automatically halts chain-of-custody transfers for the recalled batch.

### Supply Chain Participants

#### 1. Supply Chain Operations
- **Suppliers**: Initiate raw material supply.
- **Manufacturers**: Process materials and move to manufacturing stage.
- **Distributors & Retailers**: Record receipts and transfers.
- All actions are signed and immutable on the blockchain.

### End Customers

#### 1. Verify Product
- Navigate to the **Verify Product** page
- Scan the product QR code or enter the ID
- View the complete provenance and authenticity status instantly.



## Project Structure
```
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ SmartSupplyChain.sol      # Enhanced with anti-counterfeit features
â”‚   â””â”€â”€ SmartTrustScore.sol        # Soulbound NFT reputation system
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 2_deploy_contracts.js # Deploys both contracts
â”œâ”€â”€ anomaly-service/
â”‚   â”œâ”€â”€ server.js             # Express API
â”‚   â”œâ”€â”€ riskAnalyzer.js       # AI risk detection algorithms
â”‚   â””â”€â”€ .env.example          # Configuration
â”œâ”€â”€ client/src/
â”‚   â”œâ”€â”€ AntiCounterfeit.js    # Admin dashboard for flagged products
â”‚   â”œâ”€â”€ Verify.js             # Public verification portal
â”‚   â”œâ”€â”€ TrustScoreView.js     # NFT leaderboard
â”‚   â”œâ”€â”€ Track.js              # Enhanced tracking with QR
â”‚   â”œâ”€â”€ Home.js               # Updated with new features
â”‚   â””â”€â”€ [other components]
â””â”€â”€ README.md                 # This file
```

## Testing

### Manual Testing Checklist

- [ ] Deploy contracts successfully
- [ ] Register all participant types
- [ ] Create and track product through full lifecycle
- [ ] Generate QR code and verify product publicly
- [ ] Trigger anomaly by rapid stage transitions
- [ ] Verify product gets flagged automatically
- [ ] Recall a product and verify warnings appear
- [ ] Check TrustScore updates after transactions
- [ ] Test without MetaMask on verification portal

## Security Features

- âœ… Owner-only functions for critical operations
- âœ… Stage validation (can't skip stages)
- âœ… Recall protection (can't transact recalled products)
- âœ… Soulbound tokens (non-transferable reputation)
- âœ… Event logging for complete audit trail
- âœ… Anomaly detection prevents fraud

## Scalability

- Anomaly service can be scaled horizontally
- Blockchain events for efficient data querying
- Client-side rendering reduces server load
- Modular architecture for easy feature additions

## Future Enhancements

- IoT sensor integration for real-time temperature/humidity logs
- GPS coordinate tracking with Google Maps integration
- SMS notifications via Twilio
- Machine learning model training on historical fraud data
- Multi-language support for global deployment
- Mobile app (React Native)

## License

MIT

## Author

**Vikas Kumar**

## Troubleshooting

**Contracts not deploying?**
- Make sure Ganache is running on port 8545
- Try `truffle migrate --reset`

**Anomaly service not working?**
- Check it's running on port 5000
- Verify `.env` configuration
- Service is optional for basic functionality

**MetaMask errors?**
- Reset account in MetaMask settings
- Make sure you're connected to Ganache network

**QR codes not generating?**
- Install `qrcode.react`: `npm install qrcode.react`


